# InfiniteScribe - AIå°è¯´ç”Ÿæˆå¹³å°
> AI-Powered Novel Writing Platform

**âš ï¸ é¡¹ç›®çŠ¶æ€ï¼šMVP å¼€å‘ä¸­**  
InfiniteScribe æ˜¯ä¸€ä¸ªåŸºäºå¤šæ™ºèƒ½ä½“åä½œçš„ AI å°è¯´åˆ›ä½œå¹³å°ï¼Œç›®å‰æ­£åœ¨ç§¯æå¼€å‘ä¸­ã€‚æœ¬é¡¹ç›®é‡‡ç”¨å¤šä¸ªä¸“ä¸š AI ä»£ç†çš„ååŒå·¥ä½œæ¥å®ç°é«˜è´¨é‡ã€è¿è´¯çš„é•¿ç¯‡å°è¯´ç”Ÿæˆã€‚

## ğŸš§ å½“å‰å¼€å‘çŠ¶æ€

- âœ… **åŸºç¡€è®¾æ–½é…ç½®**ï¼šDocker å®¹å™¨åŒ–ã€å¼€å‘å·¥å…·é“¾ã€CI/CD æµç¨‹
- ğŸ”„ **åç«¯å¼€å‘**ï¼šAPI Gateway å’Œ Agent æœåŠ¡æ¶æ„ï¼ˆå¼€å‘ä¸­ï¼‰
- â³ **å‰ç«¯å¼€å‘**ï¼šå°šæœªå¼€å§‹ï¼Œè®¡åˆ’ä½¿ç”¨ React 18 + TypeScript
- ğŸ“‹ **é¡¹ç›®ç®¡ç†**ï¼šä½¿ç”¨ Taskmaster è¿›è¡Œä»»åŠ¡è·Ÿè¸ªå’Œè¿›åº¦ç®¡ç†

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

InfiniteScribeåˆ©ç”¨æœ€å…ˆè¿›çš„AIæŠ€æœ¯å’Œå¤šæ™ºèƒ½ä½“æ¶æ„ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªå…¨é¢çš„å°è¯´åˆ›ä½œè§£å†³æ–¹æ¡ˆã€‚ç³»ç»ŸåŒ…å«å‰ç«¯åº”ç”¨ã€APIç½‘å…³ã€å¤šä¸ªä¸“ä¸šæ™ºèƒ½ä½“æœåŠ¡ï¼Œä»¥åŠå®Œæ•´çš„åŸºç¡€è®¾æ–½æ”¯æŒã€‚

### æ ¸å¿ƒç‰¹æ€§ï¼ˆè§„åˆ’ä¸­ï¼‰
- ğŸ¤– **å¤šæ™ºèƒ½ä½“åä½œ**ï¼šä¸–ç•Œè§‚æ„å»ºã€å‰§æƒ…ç­–åˆ’ã€è§’è‰²å¡‘é€ ç­‰ä¸“ä¸š AI ä»£ç†
- ğŸ“š **æ™ºèƒ½åˆ›ä½œ**ï¼šåŸºäºä¸Šä¸‹æ–‡çš„è¿è´¯æ€§å†™ä½œå’Œæƒ…èŠ‚å‘å±•
- ğŸ¨ **ä¸ªæ€§åŒ–å®šåˆ¶**ï¼šæ”¯æŒä¸åŒå†™ä½œé£æ ¼å’Œé¢˜æ
- ğŸ” **è´¨é‡æ§åˆ¶**ï¼šè‡ªåŠ¨åŒ–çš„å†…å®¹å®¡æ ¸å’Œè´¨é‡è¯„ä¼°
- ğŸ’¾ **ç‰ˆæœ¬ç®¡ç†**ï¼šå®Œæ•´çš„åˆ›ä½œå†å²å’Œç‰ˆæœ¬æ§åˆ¶

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

### å·²é…ç½®/å¼€å‘ä¸­
- **åç«¯**: Python 3.11 + FastAPI + Pydantic
- **æ•°æ®åº“**: PostgreSQL 16 + Redis 7.2 + Neo4j 5.x + Milvus 2.6
- **æ¶ˆæ¯é˜Ÿåˆ—**: Apache Kafka 3.7
- **å·¥ä½œæµç¼–æ’**: Prefect 3.x
- **å¯¹è±¡å­˜å‚¨**: MinIO
- **AI/LLM**: LiteLLM (ç»Ÿä¸€å¤šæ¨¡å‹æ¥å£)
- **å¯è§‚æµ‹æ€§**: Langfuse
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **åŒ…ç®¡ç†**: pnpm 8.15 (Monorepo) + uv (Python)

### è®¡åˆ’ä¸­
- **å‰ç«¯**: React 18.2 + TypeScript 5.2 + Vite + Tailwind CSS + Shadcn UI

## ğŸ“ é¡¹ç›®ç»“æ„

```
infinite-scribe/
â”œâ”€â”€ apps/                       # ç‹¬ç«‹åº”ç”¨
â”‚   â”œâ”€â”€ frontend/              # Reactå‰ç«¯åº”ç”¨ï¼ˆå¾…å¼€å‘ï¼‰
â”‚   â””â”€â”€ backend/               # ç»Ÿä¸€åç«¯æœåŠ¡ï¼ˆå¼€å‘ä¸­ï¼‰
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ api/          # APIç½‘å…³æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ agents/       # æ‰€æœ‰AgentæœåŠ¡
â”‚       â”‚   â”‚   â”œâ”€â”€ worldsmith/      # ä¸–ç•Œé“¸é€ å¸ˆAgent
â”‚       â”‚   â”‚   â”œâ”€â”€ plotmaster/      # å‰§æƒ…ç­–åˆ’å¸ˆAgent
â”‚       â”‚   â”‚   â”œâ”€â”€ outliner/        # å¤§çº²è§„åˆ’å¸ˆAgent
â”‚       â”‚   â”‚   â”œâ”€â”€ director/        # å¯¼æ¼”Agent
â”‚       â”‚   â”‚   â”œâ”€â”€ characterexpert/ # è§’è‰²ä¸“å®¶Agent
â”‚       â”‚   â”‚   â”œâ”€â”€ worldbuilder/    # ä¸–ç•Œè§‚æ„å»ºå¸ˆAgent
â”‚       â”‚   â”‚   â”œâ”€â”€ writer/          # ä½œå®¶Agent
â”‚       â”‚   â”‚   â”œâ”€â”€ critic/          # è¯„è®ºå®¶Agent
â”‚       â”‚   â”‚   â”œâ”€â”€ factchecker/     # äº‹å®æ ¸æŸ¥å‘˜Agent
â”‚       â”‚   â”‚   â””â”€â”€ rewriter/        # æ”¹å†™è€…Agent
â”‚       â”‚   â”œâ”€â”€ core/         # æ ¸å¿ƒé…ç½®
â”‚       â”‚   â””â”€â”€ common/       # å…±äº«é€»è¾‘
â”‚       â”œâ”€â”€ Dockerfile        # ç»Ÿä¸€Dockeré•œåƒ
â”‚       â””â”€â”€ pyproject.toml   # ç»Ÿä¸€Pythonä¾èµ–
â”œâ”€â”€ packages/                  # å…±äº«ä»£ç åŒ…
â”‚   â”œâ”€â”€ shared-types/         # å…±äº«ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ common-utils/         # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ eslint-config-custom/ # ESLinté…ç½®
â”‚   â””â”€â”€ tsconfig-custom/      # TypeScripté…ç½®
â”œâ”€â”€ infrastructure/           # åŸºç¡€è®¾æ–½é…ç½®
â”œâ”€â”€ docs/                     # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture/         # æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ prd/                  # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚   â””â”€â”€ stories/              # ç”¨æˆ·æ•…äº‹
â”œâ”€â”€ scripts/                  # é¡¹ç›®è„šæœ¬
â””â”€â”€ .taskmaster/              # é¡¹ç›®ç®¡ç†å’Œä»»åŠ¡è·Ÿè¸ª
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js ~20.x
- pnpm ~8.15
- Docker & Docker Compose
- Python ~3.11

### å®‰è£…ä¾èµ–

#### å¿«é€Ÿè®¾ç½®ï¼ˆæ¨èï¼‰

```bash
# è¿è¡Œå¼€å‘ç¯å¢ƒè®¾ç½®è„šæœ¬
./scripts/development/setup-dev.sh
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- å®‰è£… uv åŒ…ç®¡ç†å™¨ï¼ˆå¦‚æœéœ€è¦ï¼‰
- åˆ›å»º Python è™šæ‹Ÿç¯å¢ƒ
- å®‰è£…æ‰€æœ‰ Python ä¾èµ–
- è®¾ç½® pre-commit hooks
- å®‰è£…å‰ç«¯ä¾èµ–

#### æ‰‹åŠ¨è®¾ç½®

```bash
# å®‰è£… pnpmï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
npm install -g pnpm@8.15.9

# å®‰è£…å‰ç«¯ä¾èµ–
pnpm install

# å®‰è£… uvï¼ˆPython åŒ…ç®¡ç†å™¨ï¼‰
curl -LsSf https://astral.sh/uv/install.sh | sh

# åˆ›å»º Python è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
uv venv
uv sync --dev

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# è®¾ç½® pre-commit hooks
pre-commit install
```

### ç¯å¢ƒé…ç½®

InfiniteScribe ä½¿ç”¨åˆ†å±‚çš„ç¯å¢ƒå˜é‡ç®¡ç†æ–¹æ¡ˆï¼Œå°†é…ç½®æŒ‰ç”¨é€”åˆ†ç¦»ï¼š

```bash
# åŸºç¡€è®¾æ–½é…ç½®ï¼ˆDocker Composeä½¿ç”¨ï¼‰
cp .env.example .env.infrastructure
# ç¼–è¾‘ .env.infrastructureï¼Œè®¾ç½®æ•°æ®åº“å¯†ç ç­‰

# å‰ç«¯åº”ç”¨é…ç½®ï¼ˆæš‚æœªä½¿ç”¨ï¼Œå‰ç«¯å¾…å¼€å‘ï¼‰
cp .env.frontend.example .env.frontend

# åç«¯æœåŠ¡é…ç½®ï¼ˆåŒ…å«API Gatewayå’Œæ‰€æœ‰Agenté…ç½®ï¼‰
cp .env.backend.example .env.backend
# ç¼–è¾‘ .env.backendï¼Œè®¾ç½®SERVICE_TYPEå’Œç›¸å…³é…ç½®
```

> ğŸ’¡ **æç¤º**: Docker Compose é»˜è®¤ä½¿ç”¨ `.env` æ–‡ä»¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºæŒ‡å‘ `.env.infrastructure` çš„ç¬¦å·é“¾æ¥ã€‚è¯¦ç»†ç¯å¢ƒé…ç½®è¯´æ˜è¯·å‚è€ƒ [ç¯å¢ƒå˜é‡ç»“æ„è¯´æ˜](./docs/deployment/environment-structure.md)ã€‚

### å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# å¯åŠ¨åŸºç¡€è®¾æ–½æœåŠ¡ï¼ˆæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼‰
pnpm infra:up

# æ£€æŸ¥æ‰€æœ‰æœåŠ¡å¥åº·çŠ¶æ€
pnpm check:services

# âš ï¸ å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆæš‚æœªå®ç°ï¼‰
# pnpm --filter frontend dev

# å¯åŠ¨APIç½‘å…³ï¼ˆåœ¨æ–°ç»ˆç«¯ï¼‰
cd apps/backend
SERVICE_TYPE=api-gateway uvicorn src.api.main:app --reload

# æˆ–å¯åŠ¨ç‰¹å®šAgentæœåŠ¡
SERVICE_TYPE=agent-worldsmith python -m src.agents.worldsmith.main
```

> ğŸ“– **æ³¨æ„**: å‰ç«¯åº”ç”¨å°šæœªå¼€å§‹å¼€å‘ï¼Œç›®å‰åªèƒ½å¯åŠ¨åç«¯æœåŠ¡ã€‚æ›´å¤šPythonå¼€å‘ç¯å¢ƒé…ç½®å’Œä½¿ç”¨è¯´æ˜ï¼Œè¯·å‚è€ƒ [Python å¼€å‘å¿«é€Ÿå…¥é—¨](./docs/development/python-dev-quickstart.md)ã€‚

#### åŸºç¡€è®¾æ–½ç®¡ç†å‘½ä»¤

```bash
# å¯åŠ¨æ‰€æœ‰åŸºç¡€è®¾æ–½æœåŠ¡
pnpm infra:up

# åœæ­¢æ‰€æœ‰æœåŠ¡
pnpm infra:down

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
pnpm infra:logs

# éƒ¨ç½²åˆ°å¼€å‘æœåŠ¡å™¨ (192.168.2.201) - ä»…ç”¨äºå¼€å‘ç¯å¢ƒ
pnpm infra:deploy
```

### æœåŠ¡å¥åº·æ£€æŸ¥

```bash
# æ£€æŸ¥æ‰€æœ‰å¿…éœ€æœåŠ¡çš„è¿è¡ŒçŠ¶æ€
pnpm check:services

# è¿è¡Œå®Œæ•´çš„æœåŠ¡å¥åº·æ£€æŸ¥ï¼ˆéœ€è¦é¢å¤–ä¾èµ–ï¼‰
pnpm check:services:full
```

æœåŠ¡æ£€æŸ¥åŒ…æ‹¬ï¼š
- PostgreSQLã€Redisã€Neo4j æ•°æ®åº“è¿æ¥
- Kafka æ¶ˆæ¯é˜Ÿåˆ—çŠ¶æ€
- Milvus å‘é‡æ•°æ®åº“
- MinIO å¯¹è±¡å­˜å‚¨
- Prefect å·¥ä½œæµç¼–æ’å¹³å°
- æ‰€æœ‰æœåŠ¡çš„ Web UI è®¿é—®æ€§

### é¡¹ç›®ç»“æ„éªŒè¯

```bash
# è¿è¡Œé¡¹ç›®ç»“æ„æµ‹è¯•
pnpm test:structure
```

## ğŸ“‹ å¼€å‘è¿›åº¦ç®¡ç†

æœ¬é¡¹ç›®ä½¿ç”¨ **Taskmaster** è¿›è¡Œä»»åŠ¡ç®¡ç†å’Œè¿›åº¦è·Ÿè¸ªã€‚

### æŸ¥çœ‹å½“å‰ä»»åŠ¡

```bash
# å®‰è£… Taskmasterï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
npm install -g task-master-ai

# æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡
task-master list

# æŸ¥çœ‹ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„ä»»åŠ¡
task-master next

# æŸ¥çœ‹ç‰¹å®šä»»åŠ¡è¯¦æƒ…
task-master show <task-id>
```

### å½“å‰å¼€å‘ä¼˜å…ˆçº§

1. **åŸºç¡€è®¾æ–½æ­å»º** - é«˜ä¼˜å…ˆçº§ï¼ˆè¿›è¡Œä¸­ï¼‰
2. **äº‹ä»¶é©±åŠ¨æ¶æ„** - é«˜ä¼˜å…ˆçº§ï¼ˆå¾…å¼€å§‹ï¼‰
3. **Agent æ¡†æ¶å¼€å‘** - é«˜ä¼˜å…ˆçº§ï¼ˆå¾…å¼€å§‹ï¼‰
4. **æ ¸å¿ƒ Agent å®ç°** - ä¸­ä¼˜å…ˆçº§ï¼ˆå¾…å¼€å§‹ï¼‰
5. **å‰ç«¯ç•Œé¢å¼€å‘** - ä¸­ä¼˜å…ˆçº§ï¼ˆå¾…å¼€å§‹ï¼‰

## ğŸ”§ æœåŠ¡è¯¦æƒ…

### åŸºç¡€è®¾æ–½è¯´æ˜

- **å¼€å‘æœåŠ¡å™¨ (192.168.2.201)**: ä»…ç”¨äºå¼€å‘ç¯å¢ƒçš„æŒä¹…åŒ–æœåŠ¡ï¼Œ**ä¸å¯ç”¨äºä»»ä½•æµ‹è¯•**
- **æµ‹è¯•æœåŠ¡å™¨ (192.168.2.202)**: ä¸“é—¨ç”¨äºæ‰€æœ‰æµ‹è¯•ï¼Œæ”¯æŒç ´åæ€§æµ‹è¯•

æ‰€æœ‰å¼€å‘æœåŠ¡éƒ¨ç½²åœ¨ `192.168.2.201` ä¸Šï¼Œéœ€è¦åœ¨åŒä¸€å†…ç½‘æ‰èƒ½è®¿é—®ã€‚

### æœåŠ¡ç«¯å£æ˜ å°„

| æœåŠ¡ | ç«¯å£ | è®¿é—®åœ°å€ | é»˜è®¤å‡­è¯ |
|------|------|----------|----------|
| PostgreSQL | 5432 | localhost:5432 | postgres/postgres |
| Redis | 6379 | localhost:6379 | - |
| Neo4j | 7474/7687 | http://localhost:7474 | neo4j/password |
| Kafka | 9092 | localhost:9092 | - |
| Milvus | 19530 | localhost:19530 | - |
| MinIO | 9000/9001 | http://localhost:9001 | admin/password |
| Prefect | 4200 | http://localhost:4200 | - |

> ğŸ’¡ **è¯¦ç»†é…ç½®**: å®Œæ•´çš„æœåŠ¡é…ç½®ã€Web UI è®¿é—®åœ°å€ã€æ•…éšœæ’é™¤ç­‰è¯¦ç»†ä¿¡æ¯è¯·å‚è€ƒ [è¯¦ç»†å¼€å‘æŒ‡å—](./docs/development/detailed-development-guide.md)ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘å·¥ä½œæµ

ç”±äºé¡¹ç›®å¤„äºæ—©æœŸå¼€å‘é˜¶æ®µï¼Œæˆ‘ä»¬ç‰¹åˆ«æ¬¢è¿ä»¥ä¸‹ç±»å‹çš„è´¡çŒ®ï¼š

1. **åŸºç¡€æ¶æ„å®Œå–„**ï¼šå®Œå–„ Docker é…ç½®ã€CI/CD æµç¨‹
2. **Agent æ¡†æ¶å¼€å‘**ï¼šå®ç° BaseAgent æŠ½è±¡ç±»å’Œé€šç”¨åŠŸèƒ½
3. **å‰ç«¯ç•Œé¢è®¾è®¡**ï¼šå¼€å§‹å‰ç«¯åº”ç”¨çš„å¼€å‘
4. **æ–‡æ¡£å®Œå–„**ï¼šAPI æ–‡æ¡£ã€æ¶æ„æ–‡æ¡£ã€å¼€å‘æŒ‡å—

### è´¡çŒ®æµç¨‹

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æŸ¥çœ‹ Taskmaster ä»»åŠ¡ç¡®è®¤å¼€å‘ä¼˜å…ˆçº§
4. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
5. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
6. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ

- Python: ä½¿ç”¨ Ruff + Black è¿›è¡Œä»£ç æ ¼å¼åŒ–
- TypeScript: ä½¿ç”¨ ESLint + Prettier
- æäº¤ä¿¡æ¯: éµå¾ª Conventional Commits è§„èŒƒ
- æµ‹è¯•: æ‰€æœ‰æ–°åŠŸèƒ½éœ€è¦åŒ…å«ç›¸åº”æµ‹è¯•

> ğŸ“ **è¯¦ç»†è§„èŒƒ**: å®Œæ•´çš„ä»£ç è§„èŒƒè¯´æ˜ã€CI/CD é…ç½®ã€æµ‹è¯•ç¯å¢ƒé…ç½®ç­‰è¯·å‚è€ƒ [è¯¦ç»†å¼€å‘æŒ‡å—](./docs/development/detailed-development-guide.md)ã€‚

## ğŸ“š æ–‡æ¡£

> ğŸ“– **å®Œæ•´æ–‡æ¡£ç´¢å¼•**: æŸ¥çœ‹ [æ–‡æ¡£ä¸­å¿ƒ](./docs/README.md) è·å–æ‰€æœ‰æ–‡æ¡£çš„åˆ†ç±»ç´¢å¼•å’Œå¿«é€Ÿå¯¼èˆªã€‚

### æ ¸å¿ƒæ–‡æ¡£
- [é¡¹ç›®æ¶æ„](./docs/architecture.md)
- [äº§å“éœ€æ±‚æ–‡æ¡£](./docs/prd.md)
- [å‰ç«¯è§„æ ¼è¯´æ˜](./docs/front-end-spec.md)

### å¼€å‘æŒ‡å—
- [è¯¦ç»†å¼€å‘æŒ‡å—](./docs/development/detailed-development-guide.md) - å®Œæ•´çš„æŠ€æœ¯é…ç½®å’Œè¯¦ç»†è¯´æ˜
- [å¼€å‘æœ€ä½³å®è·µ](./docs/development/)
- [éƒ¨ç½²æŒ‡å—](./docs/deployment/)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ç›®å‰ä¸ºç§æœ‰é¡¹ç›®ï¼Œæœªå¼€æºã€‚å¦‚éœ€ä½¿ç”¨è¯·è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [é¡¹ç›®ä»“åº“](https://github.com/zhiyue/infinite-scribe)
- [é—®é¢˜åé¦ˆ](https://github.com/zhiyue/infinite-scribe/issues)
- [å¼€å‘æ–‡æ¡£](./docs/)

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ­£åœ¨ç§¯æå¼€å‘çš„é¡¹ç›®ï¼ŒåŠŸèƒ½å’Œ API å¯èƒ½ä¼šé¢‘ç¹å˜æ›´ã€‚å»ºè®®å¼€å‘è€…å…³æ³¨é¡¹ç›®æ›´æ–°ï¼Œå¹¶å‚è€ƒ Taskmaster ä»»åŠ¡åˆ—è¡¨äº†è§£æœ€æ–°å¼€å‘è¿›åº¦ã€‚
